{% extends 'base.html' %}
{% block title %}Админка — Новости{% endblock %}
{% block content %}
	<div class="d-flex justify-content-between align-items-center mb-3">
		<h1 class="h3">Новости</h1>
		<a class="btn btn-primary" href="{{ url_for('admin_news_new') }}">Добавить новость</a>
	</div>
	<div class="table-responsive">
		<table class="table table-striped align-middle">
			<thead>
				<tr>
					<th>ID</th>
					<th>Заголовок</th>
					<th>Статус</th>
					<th>Создана</th>
					<th></th>
				</tr>
			</thead>
			<tbody>
				{% for item in items %}
				<tr>
					<td>{{ item.id }}</td>
					<td><a href="{{ url_for('news_detail', news_id=item.id) }}" target="_blank">{{ item.title }}</a></td>
					<td>
						{% if item.is_published %}
						<span class="badge bg-success">Опубликована</span>
						{% else %}
						<span class="badge bg-secondary">Черновик</span>
						{% endif %}
					</td>
					<td>{{ item.created_at.strftime('%d.%m.%Y %H:%M') }}</td>
					<td class="text-end">
						<a class="btn btn-sm btn-outline-primary" href="{{ url_for('admin_news_edit', news_id=item.id) }}">Редактировать</a>
						<form class="d-inline" method="post" action="{{ url_for('admin_news_delete', news_id=item.id) }}" onsubmit="return confirm('Удалить новость?');">
							<button class="btn btn-sm btn-outline-danger" type="submit">Удалить</button>
						</form>
					</td>
				</tr>
				{% endfor %}
			</tbody>
		</table>
	</div>
{% endblock %}


