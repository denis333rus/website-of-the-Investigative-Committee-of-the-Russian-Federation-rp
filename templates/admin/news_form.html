{% extends 'base.html' %}
{% block title %}{% if action == 'edit' %}Редактировать новость{% else %}Новая новость{% endif %}{% endblock %}
{% block content %}
	<h1 class="h3 mb-3">{% if action == 'edit' %}Редактировать новость{% else %}Новая новость{% endif %}</h1>
	<form method="post" enctype="multipart/form-data">
		<div class="mb-3">
			<label class="form-label">Родительская новость (для подновости)</label>
			<select class="form-select" name="parent_id">
				<option value="">— без родителя (основная новость) —</option>
				{% for p in parents %}
				<option value="{{ p.id }}" {% if item and item.parent_id==p.id %}selected{% endif %}>{{ p.title }}</option>
				{% endfor %}
			</select>
		</div>
		<div class="mb-3">
			<label class="form-label">Заголовок</label>
			<input type="text" class="form-control" name="title" required value="{{ item.title if item else '' }}">
		</div>
		<div class="mb-3">
			<label class="form-label">Ссылка на изображение (необязательно)</label>
			<input type="url" class="form-control" name="image_url" placeholder="https://...jpg" value="{{ item.image_url if item else '' }}">
			<div class="form-text">Вставьте прямую ссылку на изображение. Поддерживаются http/https.</div>
		</div>
		<div class="mb-3">
			<label class="form-label">Или загрузить файл</label>
			<input type="file" class="form-control" name="image_file" accept="image/*">
		</div>
		<div class="mb-3">
			<label class="form-label">Содержание</label>
			<textarea class="form-control" name="content" rows="10" required>{{ item.content if item else '' }}</textarea>
		</div>
		<div class="form-check mb-3">
			<input class="form-check-input" type="checkbox" name="is_published" id="is_published" {% if item and item.is_published %}checked{% elif not item %}checked{% endif %}>
			<label class="form-check-label" for="is_published">Опубликовано</label>
		</div>
		<button class="btn btn-primary" type="submit">Сохранить</button>
		<a class="btn btn-outline-secondary" href="{{ url_for('admin_news_list') }}">Отмена</a>
	</form>
{% endblock %}


