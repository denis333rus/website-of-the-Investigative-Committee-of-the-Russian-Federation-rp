{% extends "base.html" %}

{% block title %}Управление отзывами - Админ-панель{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
	<h2><i class="bi bi-star"></i> Управление отзывами</h2>
	<a href="{{ url_for('admin_dashboard') }}" class="btn btn-outline-secondary">
		<i class="bi bi-arrow-left"></i> Назад в админку
	</a>
</div>

<div class="card">
	<div class="card-header">
		<h5 class="mb-0">Все отзывы</h5>
	</div>
	<div class="card-body">
		{% if reviews %}
		<div class="table-responsive">
			<table class="table table-hover">
				<thead>
					<tr>
						<th>ID</th>
						<th>Автор</th>
						<th>Оценка</th>
						<th>Заголовок</th>
						<th>Статус</th>
						<th>Дата</th>
						<th>Действия</th>
					</tr>
				</thead>
				<tbody>
					{% for review in reviews %}
					<tr>
						<td>{{ review.id }}</td>
						<td>{{ review.author_name }}</td>
						<td>
							{% for i in range(1, 6) %}
								{% if i <= review.rating %}
									<i class="bi bi-star-fill text-warning"></i>
								{% else %}
									<i class="bi bi-star text-muted"></i>
								{% endif %}
							{% endfor %}
							<span class="ms-1">({{ review.rating }}/5)</span>
						</td>
						<td>{{ review.title }}</td>
						<td>
							{% if review.status == 'pending' %}
								<span class="badge bg-warning">Ожидает</span>
							{% elif review.status == 'approved' %}
								<span class="badge bg-success">Одобрен</span>
							{% elif review.status == 'rejected' %}
								<span class="badge bg-danger">Отклонен</span>
							{% endif %}
						</td>
						<td>{{ review.created_at.strftime('%d.%m.%Y %H:%M') }}</td>
						<td>
							<a href="{{ url_for('admin_review_detail', review_id=review.id) }}" 
							   class="btn btn-sm btn-outline-primary">
								<i class="bi bi-eye"></i> Просмотр
							</a>
						</td>
					</tr>
					{% endfor %}
				</tbody>
			</table>
		</div>
		{% else %}
		<div class="text-center py-5">
			<i class="bi bi-star display-1 text-muted"></i>
			<h5 class="text-muted mt-3">Отзывов пока нет</h5>
		</div>
		{% endif %}
	</div>
</div>
{% endblock %}
