# Настройка для Railway.com

## Проблема
Railway.com сбрасывает файловую систему при каждом обновлении, что приводит к потере данных SQLite.

## Решения

### 1. Использование PostgreSQL (Рекомендуется)

#### Шаг 1: Добавить PostgreSQL в проект
1. В панели Railway перейдите в ваш проект
2. Нажмите "New" → "Database" → "PostgreSQL"
3. Railway автоматически создаст переменную `DATABASE_URL`

#### Шаг 2: Переменные окружения
Убедитесь, что установлены следующие переменные:
- `DATABASE_URL` - автоматически создается Railway
- `SECRET_KEY` - установите надежный ключ
- `SMTP_ENABLED` - false (по умолчанию)
- `DISCORD_WEBHOOK_URL` - опционально
- `TELEGRAM_BOT_TOKEN` - опционально
- `TELEGRAM_CHAT_ID` - опционально

### 2. Альтернативные решения

#### Вариант A: Внешняя база данных
- Используйте внешний PostgreSQL (Supabase, Neon, PlanetScale)
- Установите `DATABASE_URL` в переменные окружения

#### Вариант B: Persistent Volume
- Railway поддерживает постоянные тома
- Настройте в панели Railway

#### Вариант C: Backup/Restore
- Создайте скрипт для автоматического бэкапа
- Восстанавливайте данные при каждом деплое

## Настройка переменных окружения

### В Railway Dashboard:
1. Перейдите в Settings → Variables
2. Добавьте:
   ```
   SECRET_KEY=your-super-secret-key-here
   SMTP_ENABLED=false
   ```

### Для уведомлений (опционально):
```
DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/...
TELEGRAM_BOT_TOKEN=your-bot-token
TELEGRAM_CHAT_ID=your-chat-id
```

## Проверка работы
После настройки PostgreSQL:
1. Приложение автоматически создаст таблицы
2. Данные будут сохраняться между деплоями
3. Проверьте логи на наличие ошибок подключения к БД

## Миграция данных
Если у вас уже есть данные в SQLite:
1. Экспортируйте данные из SQLite
2. Импортируйте в PostgreSQL
3. Обновите приложение

## Мониторинг
- Проверяйте логи Railway на ошибки БД
- Используйте Railway Metrics для мониторинга
- Настройте алерты при ошибках подключения
